<ContentDialog
    x:Class="MrmTool.Dialogs.CreateOrModifyCandidateDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MrmTool.Dialogs"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:winuieditor="using:WinUIEditor"
    xmlns:mrm="using:MrmLib"
    xmlns:common="using:MrmTool.Common"
    mc:Ignorable="d"
    Title="Create New Candidate"
    PrimaryButtonText="Create"
    CloseButtonText="Cancel"
    DefaultButton="Primary"
    PrimaryButtonClick="ContentDialog_PrimaryButtonClick"
    CloseButtonClick="ContentDialog_CloseButtonClick"
    Closing="ContentDialog_Closing"
    Loaded="ContentDialog_Loaded">

    <ContentDialog.Resources>
        <x:Double x:Key="ContentDialogMinWidth">500</x:Double>
        <x:Double x:Key="ContentDialogMaxWidth">1200</x:Double>
        <x:Double x:Key="ContentDialogMaxHeight">1200</x:Double>
    </ContentDialog.Resources>

    <Grid>
        <Grid x:Name="candidateGrid">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Text="Type" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,5,5,0" Grid.Column="0"/>
                <ComboBox x:Name="typeBox" VerticalAlignment="Top" SelectedIndex="0" HorizontalAlignment="Stretch" Margin="5,5,0,0" Grid.Column="1" SelectionChanged="typeBox_SelectionChanged">
                    <ComboBoxItem Content="String"/>
                    <ComboBoxItem Content="File Path"/>
                    <ComboBoxItem Content="Embedded Data"/>
                </ComboBox>
            </Grid>

            <Grid x:Name="stringContainer" x:Load="False" Grid.Row="1" VerticalAlignment="Top" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Content:" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
                <Button HorizontalAlignment="Right" Content="Import from file" MinWidth="150" Grid.Column="1" Margin="5,0,0,0" Click="ImportButton_Click"/>
            </Grid>

            <Grid x:Name="pathContainer" x:Load="False" Grid.Row="1" VerticalAlignment="Top" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="File Path" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
                <TextBox x:Name="pathBox" Text="Assets\New\Resource.png" IsSpellCheckEnabled="False" PlaceholderText="File path in relation to PRI root folder" TextChanged="pathBox_TextChanged" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="5,0,0,0" Grid.Column="1"/>
            </Grid>

            <Grid x:Name="dataContainer" x:Load="False" Grid.Row="1" VerticalAlignment="Top" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Data Source" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
                <ComboBox x:Name="sourceBox" VerticalAlignment="Top" SelectedIndex="0" HorizontalAlignment="Stretch" Margin="5,0,0,0" Grid.Row="1" Grid.Column="1" SelectionChanged="sourceBox_SelectionChanged">
                    <ComboBoxItem Content="File"/>
                    <ComboBoxItem Content="Text String (UTF-8)"/>
                    <ComboBoxItem Content="Text String (UTF-16LE)"/>
                </ComboBox>
            </Grid>

            <winuieditor:CodeEditorControl x:Name="editorControl" x:Load="False" Grid.Row="2" Padding="-10,12,0,0" HorizontalAlignment="Stretch" MinHeight="200"/>
            <Button x:Name="browseButton" x:Load="False" HorizontalAlignment="Stretch" Margin="0,10,0,0" Grid.Row="2" Click="browseButton_Click">
                <TextBlock x:Name="browseBlock" Text="Browse..." TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" />
            </Button>

            <Grid Grid.Row="3" VerticalAlignment="Top" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Qualifiers:" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="1" Margin="5,0,0,0">
                    <Button x:Name="deleteQualifierButton" IsEnabled="False" Click="deleteQualifierButton_Click" Margin="0,0,5,0" HorizontalAlignment="Left">
                        <SymbolIcon Symbol="Delete" />
                    </Button>

                    <Button Click="addQualifierButton_Click" HorizontalAlignment="Left">
                        <SymbolIcon Symbol="Add" />
                    </Button>
                </StackPanel>
            </Grid>

            <ListView x:Name="qualifiersList" ItemsSource="{x:Bind Qualifiers}" SelectionChanged="qualifiersList_SelectionChanged" Margin="0,5,0,0" Grid.Row="4">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="mrm:Qualifier">
                        <TextBlock Text="{x:Bind common:BindingHelpers.FormatQualifier(AttributeName, FallbackScore, Operator, Priority, Value)}"/>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

        <Grid x:Name="qualifierGrid" x:Load="False" Loaded="qualifierGrid_Loaded">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Attribute" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
            <ComboBox x:Name="attributeBox" Grid.Row="0" SelectionChanged="qualifierComboBox_TextChanged" VerticalAlignment="Top" SelectedIndex="0" HorizontalAlignment="Stretch" Margin="5,5,0,5" Grid.Column="1">
                <ComboBoxItem Content="Language"/>
                <ComboBoxItem Content="Contrast"/>
                <ComboBoxItem Content="Scale"/>
                <ComboBoxItem Content="HomeRegion"/>
                <ComboBoxItem Content="TargetSize"/>
                <ComboBoxItem Content="LayoutDirection"/>
                <ComboBoxItem Content="Theme"/>
                <ComboBoxItem Content="AlternateForm"/>
                <ComboBoxItem Content="DXFeatureLevel"/>
                <ComboBoxItem Content="Configuration"/>
                <ComboBoxItem Content="DeviceFamily"/>
            </ComboBox>

            <TextBlock Text="Operator" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
            <ComboBox x:Name="operatorBox" Grid.Row="1" SelectionChanged="qualifierComboBox_TextChanged" VerticalAlignment="Top" SelectedIndex="10" HorizontalAlignment="Stretch" Margin="5,0,0,5" Grid.Column="1">
                <ComboBoxItem Content="False"/>
                <ComboBoxItem Content="True"/>
                <ComboBoxItem Content="AttributeDefined"/>
                <ComboBoxItem Content="AttributeUndefined"/>
                <ComboBoxItem Content="NotEqual"/>
                <ComboBoxItem Content="NoMatch"/>
                <ComboBoxItem Content="Less"/>
                <ComboBoxItem Content="LessOrEqual"/>
                <ComboBoxItem Content="Greater"/>
                <ComboBoxItem Content="GreaterOrEqual"/>
                <ComboBoxItem Content="Match"/>
                <ComboBoxItem Content="Equal"/>
            </ComboBox>

            <TextBlock Text="Value" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
            <TextBox x:Name="valueBox" Text="en-US" Grid.Row="2" IsSpellCheckEnabled="False" PlaceholderText="Qualifier value" TextChanged="qualifierBox_TextChanged" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="5,0,0,5" Grid.Column="1"/>

            <TextBlock Text="Priority" Grid.Row="3" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
            <TextBox x:Name="priorityBox" Text="0" Grid.Row="3" IsSpellCheckEnabled="False" PlaceholderText="Priority (integer)" TextChanged="qualifierBox_TextChanged" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="5,0,0,5" Grid.Column="1"/>

            <TextBlock Text="Fallback Score" Grid.Row="4" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,5,0" Grid.Column="0"/>
            <TextBox x:Name="fallbackBox" Text="0.0" Grid.Row="4" IsSpellCheckEnabled="False" PlaceholderText="Fallback Score (double)" TextChanged="qualifierBox_TextChanged" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="5,0,0,0" Grid.Column="1"/>
        </Grid>
    </Grid>
</ContentDialog>
